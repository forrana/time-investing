{% block content %}
<script>
  const activeSkills = [[skills|tojson|safe]];
</script>
  <main id="home">
  <h1 style="text-align: center;">You still have <mark id="expenses-list-time-left"></mark><mark>minutes</mark> today to invest</h1>
  <div style="display: flex">
    <div class="input-group mb-3">
      <select class="form-control" name="skill" v-model="expense.skill" :disabled="isActivityStarted">
          <option value=""> Chose an activity and press start to invest! </option>
        {% for skill in skills %}
          <option value="[[skill.id]]">[[skill.name]]</option>
        {% endfor %}
      </select>
      <select class="form-control" v-model="expense.amount" :disabled="isActivityStarted">
          <option value="1">1 minute</option>
        {% for n in range(4) %}
          <option value="[[15*(n + 1)]]">[[15*(n+1)]] minutes</option>
        {% endfor %}
      </select>
      <button
        class="btn btn-default input-group-append"
        v-on:click="onActivityStart"
        :disabled="!expense.skill || !selectedAmountOfTime"
        v-if="!isActivityStarted"
        >Start!</button>
      <button
        class="btn btn-default input-group-append"
        v-on:click="onActivityStop"
        v-if="isActivityStarted"
        >Stop!</button>
    </div>
  </div>
  <div class="progress">
    <div
      class="progress-bar progress-bar-striped progress-bar-animated"
      role="progressbar"
      v-bind:style="{width: timerProgressInPercents + '%'}"
      v-bind:aria-valuenow="timerProgressInPercents"
      aria-valuemin="0"
      aria-valuemax="100">
    </div>
    <span class="justify-content-center d-flex position-absolute w-100">{{timeProgressBarText}}</span>
  </div>
  </main>
  <section>
    Totally invested today:
    {% for expense in expenses %}
    <div class="progress">
      <div
        class="progress-bar progress-bar-striped progress-bar-animated"
        role="progressbar"
        style="width: [[expense.total]]%"
        aria-valuenow="[[expense.total]]"
        aria-valuemin="0"
        aria-valuemax="100">
      </div>
      <span class="justify-content-center d-flex position-absolute w-100">[[expense.name]]: [[expense.total]] minutes</span>
    </div>
    {% endfor %}
  </section>
{% endblock %}
